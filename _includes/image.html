{% comment %}
This image technique is taken from Eduardo Boucas with a few changes because I want to use the URL instead of the filename. 1,000,000 thanks Eduardo for making and sharing this! 
https://eduardoboucas.com/blog/2014/12/07/including-and-managing-images-in-jekyll.html
{% endcomment %}
{% capture imagePath %}{{ page.path | split: '/' | last | split: '.' | first }}/{{ include.name }}{% endcapture %}
{% if include.caption %}
    <figure>
        <img src="/assets/posts/{{ imagePath }}" {% if include.alt %} alt="{{ include.alt }}" {% endif %} {% if include.width %} width="{{ include.width }}" {% endif %}/>
        <figcaption>{{ include.caption }}</figcaption>
    </figure>
{% else %}
	<img src="/assets/posts/{{ imagePath }}" {% if include.alt %} alt="{{ include.alt }}" {% endif %} {% if include.width %} width="{{ include.width }}" {% endif %} 
{% endif %}